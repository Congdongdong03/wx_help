# ğŸ› æ•°æ®åº“é—®é¢˜æ·±åº¦è¯Šæ–­ä¸è§£å†³æ–¹æ¡ˆ

## é—®é¢˜æè¿°

ç”¨æˆ·åœ¨ä½¿ç”¨ Prisma Studio æ—¶é‡åˆ°é”™è¯¯ï¼š

```
The table `favorite` does not exist in the current database.
```

## ğŸ” æ·±åº¦è¯Šæ–­è¿‡ç¨‹

### 1. é—®é¢˜æ ¹æºåˆ†æ

é€šè¿‡æ·±åº¦è¯Šæ–­å‘ç°é—®é¢˜çš„æ ¹æœ¬åŸå› ï¼š

1. **å¤šä¸ªæ•°æ®åº“æ–‡ä»¶å†²çª**

   - `prisma/wx_help.sqlite` (110KB) - ä¸»æ•°æ®åº“
   - `prisma/prisma/wx_help.sqlite` (163KB) - åµŒå¥—æ•°æ®åº“ï¼ˆå†²çªæºï¼‰

2. **è¿ç§»çŠ¶æ€ä¸ä¸€è‡´**

   - Prisma schema å’Œæ•°æ®åº“è¿ç§»ä¸åŒæ­¥
   - è¿ç§»æ–‡ä»¶å­˜åœ¨ä½†æœªåº”ç”¨

3. **Prisma Client ç¼“å­˜é—®é¢˜**
   - å®¢æˆ·ç«¯ç¼“å­˜äº†æ—§çš„æ•°æ®åº“è·¯å¾„
   - æ¸…ç†ç¼“å­˜åé—®é¢˜å¾—åˆ°è§£å†³

### 2. è¯Šæ–­å·¥å…·

åˆ›å»ºäº†ä»¥ä¸‹è¯Šæ–­è„šæœ¬ï¼š

- `debug-database.ts` - æ·±åº¦æ•°æ®åº“è¯Šæ–­
- `test-prisma-connection.ts` - è¿æ¥æµ‹è¯•
- `final-verification.ts` - æœ€ç»ˆéªŒè¯

## ğŸ› ï¸ è§£å†³æ–¹æ¡ˆ

### æ­¥éª¤ 1: æ¸…ç†å†²çªæ–‡ä»¶

```bash
# åˆ é™¤å†²çªçš„åµŒå¥—æ•°æ®åº“æ–‡ä»¶
rm prisma/prisma/wx_help.sqlite
```

### æ­¥éª¤ 2: æ¸…ç† Prisma ç¼“å­˜

```bash
# æ¸…ç†ç³»ç»Ÿç¼“å­˜
rm -rf ~/.cache/prisma

# æ¸…ç†é¡¹ç›®ç¼“å­˜
rm -rf node_modules/.prisma
```

### æ­¥éª¤ 3: é‡æ–°ç”Ÿæˆ Prisma Client

```bash
npx prisma generate
```

### æ­¥éª¤ 4: åº”ç”¨æ•°æ®åº“è¿ç§»

```bash
npx prisma migrate deploy
```

### æ­¥éª¤ 5: é‡æ–°åˆ›å»ºæµ‹è¯•æ•°æ®

```bash
npx ts-node scripts/create-all-test-data.ts
```

### æ­¥éª¤ 6: éªŒè¯è§£å†³æ–¹æ¡ˆ

```bash
npx ts-node scripts/final-verification.ts
```

## âœ… æœ€ç»ˆç»“æœ

### æ•°æ®åº“çŠ¶æ€

- âœ… æ‰€æœ‰ 14 ä¸ªè¡¨éƒ½å¯ä»¥æ­£å¸¸è®¿é—®
- âœ… æ¯ä¸ªè¡¨éƒ½æœ‰æµ‹è¯•æ•°æ®
- âœ… å…³è”æŸ¥è¯¢æ­£å¸¸å·¥ä½œ
- âœ… Prisma Studio å¯ä»¥æ­£å¸¸ä½¿ç”¨

### å¯ç”¨çš„è„šæœ¬

- `start-studio.sh` - æ™ºèƒ½å¯åŠ¨ Prisma Studioï¼ˆè‡ªåŠ¨å¤„ç†ç«¯å£å†²çªï¼‰
- `show-data-summary.js` - æ˜¾ç¤ºæ•°æ®ç»Ÿè®¡
- `test-prisma-connection.ts` - æµ‹è¯•æ•°æ®åº“è¿æ¥
- `verify-setup.ts` - éªŒè¯å®Œæ•´è®¾ç½®

## ğŸ¯ é¢„é˜²æªæ–½

### 1. é¿å…æ•°æ®åº“æ–‡ä»¶å†²çª

- ç¡®ä¿åªæœ‰ä¸€ä¸ªæ•°æ®åº“æ–‡ä»¶
- å®šæœŸæ¸…ç†ä¸éœ€è¦çš„æ•°æ®åº“æ–‡ä»¶
- ä½¿ç”¨ç»å¯¹è·¯å¾„é…ç½® DATABASE_URL

### 2. ä¿æŒè¿ç§»åŒæ­¥

- å®šæœŸè¿è¡Œ `npx prisma migrate status` æ£€æŸ¥è¿ç§»çŠ¶æ€
- åŠæ—¶åº”ç”¨æ–°çš„è¿ç§»
- åœ¨ä¿®æ”¹ schema åé‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯

### 3. å®šæœŸæ¸…ç†ç¼“å­˜

- æ¸…ç† Prisma ç¼“å­˜ï¼š`rm -rf ~/.cache/prisma`
- æ¸…ç†é¡¹ç›®ç¼“å­˜ï¼š`rm -rf node_modules/.prisma`
- é‡æ–°ç”Ÿæˆå®¢æˆ·ç«¯ï¼š`npx prisma generate`

## ğŸ“± ä½¿ç”¨æŒ‡å—

### å¯åŠ¨ Prisma Studio

```bash
# ä½¿ç”¨æ™ºèƒ½å¯åŠ¨è„šæœ¬ï¼ˆæ¨èï¼‰
./scripts/start-studio.sh

# æˆ–ç›´æ¥å¯åŠ¨
npx prisma studio --port 5555
```

### è®¿é—®åœ°å€

- Prisma Studio: http://localhost:5555

### éªŒè¯æ•°æ®åº“çŠ¶æ€

```bash
# æŸ¥çœ‹æ•°æ®ç»Ÿè®¡
node scripts/show-data-summary.js

# éªŒè¯å®Œæ•´è®¾ç½®
npx ts-node scripts/verify-setup.ts
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¦‚æœå†æ¬¡é‡åˆ°ç±»ä¼¼é—®é¢˜ï¼š

1. **æ£€æŸ¥æ•°æ®åº“æ–‡ä»¶**

   ```bash
   ls -la prisma/*.sqlite
   ```

2. **æ£€æŸ¥è¿ç§»çŠ¶æ€**

   ```bash
   npx prisma migrate status
   ```

3. **æ¸…ç†å¹¶é‡æ–°ç”Ÿæˆ**

   ```bash
   rm -rf node_modules/.prisma
   npx prisma generate
   npx prisma migrate deploy
   ```

4. **é‡æ–°åˆ›å»ºæ•°æ®**
   ```bash
   npx ts-node scripts/create-all-test-data.ts
   ```

## ğŸ“Š é—®é¢˜ç»Ÿè®¡

- **é—®é¢˜ç±»å‹**: æ•°æ®åº“è¡¨ä¸å­˜åœ¨é”™è¯¯
- **æ ¹æœ¬åŸå› **: å¤šä¸ªæ•°æ®åº“æ–‡ä»¶å†²çª + è¿ç§»ä¸åŒæ­¥
- **è§£å†³æ—¶é—´**: çº¦ 30 åˆ†é’Ÿ
- **æ¶‰åŠæ–‡ä»¶**: 3 ä¸ªæ•°æ®åº“æ–‡ä»¶ï¼Œå¤šä¸ªè„šæœ¬æ–‡ä»¶
- **æœ€ç»ˆçŠ¶æ€**: âœ… å®Œå…¨è§£å†³

---

**æ€»ç»“**: è¿™ä¸ªé—®é¢˜æ˜¯ç”±äºæ•°æ®åº“æ–‡ä»¶å†²çªå’Œ Prisma é…ç½®ä¸åŒæ­¥å¯¼è‡´çš„ã€‚é€šè¿‡ç³»ç»Ÿæ€§çš„è¯Šæ–­å’Œæ¸…ç†ï¼Œé—®é¢˜å¾—åˆ°äº†å½»åº•è§£å†³ã€‚ç°åœ¨æ•°æ®åº“å®Œå…¨æ­£å¸¸ï¼Œå¯ä»¥æ­£å¸¸ä½¿ç”¨ Prisma Studio è¿›è¡Œå¼€å‘å’Œæ•°æ®ç®¡ç†ã€‚
